<div class="bg-white rounded-lg shadow-sm">
  <!-- Header -->
  <div class="p-4 sm:p-6 border-b border-gray-200 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4">
    <div>
      <h2 class="text-xl sm:text-2xl font-bold text-gray-800">Faculty Management</h2>
      <p class="text-sm sm:text-base text-gray-600 mt-1">Manage faculty recruitment, profiles, and performance</p>
    </div>
    <button
      (click)="toggleAddForm()"
      class="bg-blue-600 hover:bg-blue-700 text-white px-4 sm:px-6 py-2 sm:py-3 rounded-lg font-semibold transition-colors duration-200 flex items-center whitespace-nowrap w-full sm:w-auto justify-center">
      <i class="ri-user-star-line mr-2"></i>
      <span class="text-sm sm:text-base">Add Faculty Member</span>
    </button>
  </div>

  <!-- Filters -->
  <div class="p-4 sm:p-6 border-b border-gray-200 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-2">Search Faculty</label>
      <div class="relative">
        <input type="text" placeholder="Search by name, ID, or email..."
               [(ngModel)]="searchTerm"
               (ngModelChange)="onSearchOrFilterChange()"
               class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm" />
        <i class="ri-search-line absolute left-3 top-2.5 text-gray-400"></i>
      </div>
    </div>

    <div>
      <label class="block text-sm font-medium text-gray-700 mb-2">Department</label>
      <select [(ngModel)]="selectedDepartment"
              (ngModelChange)="onSearchOrFilterChange()"
              class="w-full px-3 py-2 pr-8 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm">
        <option value="">All Departments</option>
        <option *ngFor="let dept of departments" [value]="dept">{{ dept }}</option>
      </select>
    </div>

    <div class="flex items-end">
      <button (click)="exportData()"
        class="w-full bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200 flex items-center justify-center whitespace-nowrap">
        <i class="ri-file-excel-line mr-2"></i>
        <span class="text-sm sm:text-base">Export Data</span>
      </button>
    </div>
  </div>

  <!-- Faculty Table -->
  <div class="overflow-x-auto -mx-4 sm:mx-0">
    <table class="w-full min-w-[600px] text-xs sm:text-sm">
      <thead class="bg-gray-50">
        <tr>
          <th class="px-2 sm:px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase w-12">Sr.</th>
          <th class="px-2 sm:px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase min-w-[150px]">Faculty Info</th>
          <th class="px-2 sm:px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase hidden md:table-cell">Department</th>
          <th class="px-2 sm:px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase hidden lg:table-cell">Designation</th>
          <th class="px-2 sm:px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase hidden sm:table-cell">Exp.</th>
          <th class="px-2 sm:px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase">Status</th>
          <th class="px-2 sm:px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase w-24">Actions</th>
        </tr>
      </thead>
      <tbody class="bg-white divide-y divide-gray-200">
        <tr *ngFor="let member of paginatedFaculty; let i = index" class="hover:bg-gray-50 transition-colors">
          <td class="px-2 sm:px-3 py-2 whitespace-nowrap text-xs font-medium text-gray-900">
            {{ getSerialNumber(i) }}
          </td>
          <td class="px-2 sm:px-3 py-2">
            <div class="text-xs sm:text-sm font-medium text-gray-900 truncate max-w-[150px]">{{ member.name }}</div>
            <div class="text-xs text-gray-500 truncate max-w-[150px]">{{ member.employeeId }}</div>
            <div class="text-xs text-gray-500 truncate max-w-[150px] hidden sm:block">{{ member.email }}</div>
            <div class="text-xs text-gray-500 truncate max-w-[150px] hidden md:block">{{ member.qualification }}</div>
            <div class="text-xs text-gray-500 md:hidden">
              <span class="inline-block mr-2">{{ member.department }}</span>
              <span class="hidden sm:inline">{{ member.designation }}</span>
            </div>
          </td>
          <td class="px-2 sm:px-3 py-2 whitespace-nowrap text-xs sm:text-sm text-gray-900 hidden md:table-cell">
            <div class="truncate max-w-[120px]">{{ member.department }}</div>
          </td>
          <td class="px-2 sm:px-3 py-2 whitespace-nowrap text-xs sm:text-sm text-gray-900 hidden lg:table-cell">
            <div class="truncate max-w-[120px]">{{ member.designation }}</div>
          </td>
          <td class="px-2 sm:px-3 py-2 whitespace-nowrap text-xs sm:text-sm text-gray-900 hidden sm:table-cell">
            {{ member.experience }}y
          </td>
          <td class="px-2 sm:px-3 py-2 whitespace-nowrap">
            <button (click)="toggleStatus(member)"
              [ngClass]="{
                'bg-green-100 text-green-800 hover:bg-green-200': member.status === 'active',
                'bg-red-100 text-red-800 hover:bg-red-200': member.status === 'inactive'
              }"
              class="inline-flex px-1.5 py-0.5 sm:px-2 sm:py-1 text-xs font-semibold rounded-full transition-colors cursor-pointer">
              <span class="hidden sm:inline">{{ member.status }}</span>
              <span class="sm:hidden">{{ member.status === 'active' ? 'A' : 'I' }}</span>
            </button>
          </td>
          <td class="px-2 sm:px-3 py-2 whitespace-nowrap">
            <div class="flex items-center gap-1">
              <button (click)="viewFaculty(member)" 
                class="text-blue-600 hover:text-blue-800 p-1 rounded hover:bg-blue-50 transition-colors" 
                title="View Details">
                <i class="ri-eye-line text-sm sm:text-base"></i>
              </button>
              <button (click)="editFaculty(member)" 
                class="text-green-600 hover:text-green-800 p-1 rounded hover:bg-green-50 transition-colors" 
                title="Edit">
                <i class="ri-edit-line text-sm sm:text-base"></i>
              </button>
              <button (click)="deleteFaculty(member.id)" 
                class="text-red-600 hover:text-red-800 p-1 rounded hover:bg-red-50 transition-colors" 
                title="Delete">
                <i class="ri-delete-bin-line text-sm sm:text-base"></i>
              </button>
            </div>
          </td>
        </tr>
        <tr *ngIf="filteredFaculty.length === 0">
          <td colspan="7" class="px-4 py-6 text-center text-gray-500">
            <i class="ri-user-search-line text-3xl sm:text-4xl mb-2 block"></i>
            <p class="text-xs sm:text-sm">No faculty members found</p>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Pagination -->
  <div *ngIf="filteredFaculty.length > 0" class="px-4 sm:px-6 py-6 border-t-2 border-gray-200/80 bg-gradient-to-br from-slate-50 via-blue-50/20 to-indigo-50/30 backdrop-blur-sm">
    <div class="flex flex-col lg:flex-row items-center justify-between gap-5">
      <!-- Results Info -->
      <div class="flex items-center gap-3 flex-wrap justify-center lg:justify-start">
        <div class="group flex items-center gap-3 px-5 py-3 bg-white/90 backdrop-blur-sm rounded-2xl border-2 border-gray-200/60 shadow-lg hover:shadow-xl transition-all duration-300 hover:border-blue-300/60 hover:scale-[1.02]">
          <div class="flex items-center justify-center w-10 h-10 rounded-xl bg-gradient-to-br from-blue-500 via-blue-600 to-indigo-600 text-white shadow-lg group-hover:shadow-xl group-hover:scale-110 transition-all duration-300">
            <i class="ri-file-list-3-line text-base"></i>
          </div>
          <div class="flex items-center gap-2">
            <span class="text-sm font-extrabold text-gray-900">{{ getStartIndex() }}</span>
            <span class="text-gray-400 font-bold text-xs">→</span>
            <span class="text-sm font-extrabold text-gray-900">{{ getEndIndex() }}</span>
            <span class="text-gray-500 mx-1.5 text-xs font-semibold">of</span>
            <span class="text-lg font-black bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 bg-clip-text text-transparent">{{ filteredFaculty.length }}</span>
          </div>
        </div>
        <div class="hidden xl:flex items-center gap-2 px-4 py-2.5 bg-white/70 backdrop-blur-sm rounded-xl border border-gray-200/60 shadow-md">
          <div class="w-6 h-6 rounded-lg bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center">
            <i class="ri-database-2-line text-white text-xs"></i>
          </div>
          <span class="text-xs text-gray-700 font-semibold">Total Records</span>
        </div>
      </div>

      <!-- Pagination Controls -->
      <div class="flex items-center gap-2.5">
        <!-- First Page Button -->
        <button 
          (click)="goToPage(1)"
          [disabled]="currentPage === 1"
          [ngClass]="{
            'opacity-25 cursor-not-allowed': currentPage === 1,
            'hover:bg-gradient-to-r hover:from-blue-50 hover:via-indigo-50 hover:to-purple-50 hover:border-blue-400 hover:text-blue-700 hover:shadow-lg hover:-translate-y-1 hover:scale-105': currentPage !== 1
          }"
          class="group px-3.5 py-3 border-2 border-gray-300/80 rounded-2xl bg-white/90 backdrop-blur-sm text-gray-700 transition-all duration-300 disabled:pointer-events-none shadow-md hover:shadow-xl">
          <i class="ri-arrow-left-double-line text-lg group-hover:scale-125 transition-transform duration-300"></i>
        </button>

        <!-- Previous Button -->
        <button 
          (click)="previousPage()"
          [disabled]="currentPage === 1"
          [ngClass]="{
            'opacity-25 cursor-not-allowed': currentPage === 1,
            'hover:bg-gradient-to-r hover:from-blue-50 hover:via-indigo-50 hover:to-purple-50 hover:border-blue-400 hover:text-blue-700 hover:shadow-lg hover:-translate-y-1 hover:scale-105': currentPage !== 1
          }"
          class="group px-4 py-3 border-2 border-gray-300/80 rounded-2xl bg-white/90 backdrop-blur-sm text-gray-700 transition-all duration-300 disabled:pointer-events-none shadow-md hover:shadow-xl">
          <i class="ri-arrow-left-s-line text-lg group-hover:scale-125 transition-transform duration-300"></i>
        </button>

        <!-- Page Numbers -->
        <div class="flex items-center gap-2 px-3 py-2 bg-white/70 backdrop-blur-sm rounded-2xl border-2 border-gray-200/60 shadow-lg">
          <button
            *ngFor="let page of pageNumbers"
            (click)="page !== -1 && goToPage(page)"
            [ngClass]="{
              'bg-gradient-to-br from-blue-600 via-indigo-600 to-purple-600 text-white border-blue-500 shadow-2xl scale-110 ring-4 ring-blue-200/50 ring-offset-2 z-10': page === currentPage,
              'bg-white/90 text-gray-700 border-gray-300/80 hover:bg-gradient-to-br hover:from-blue-50 hover:via-indigo-50 hover:to-purple-50 hover:border-blue-400 hover:text-blue-700 hover:shadow-lg hover:scale-105 hover:-translate-y-0.5': page !== currentPage && page !== -1,
              'cursor-default pointer-events-none bg-transparent border-transparent': page === -1
            }"
            [disabled]="page === -1"
            class="min-w-[2.75rem] h-11 px-4 border-2 rounded-2xl text-sm font-black transition-all duration-300 disabled:pointer-events-none">
            <span *ngIf="page !== -1" class="relative z-10">{{ page }}</span>
            <span *ngIf="page === -1" class="text-gray-400 font-normal text-xl leading-none">⋯</span>
          </button>
        </div>

        <!-- Next Button -->
        <button 
          (click)="nextPage()"
          [disabled]="currentPage === totalPages"
          [ngClass]="{
            'opacity-25 cursor-not-allowed': currentPage === totalPages,
            'hover:bg-gradient-to-r hover:from-blue-50 hover:via-indigo-50 hover:to-purple-50 hover:border-blue-400 hover:text-blue-700 hover:shadow-lg hover:-translate-y-1 hover:scale-105': currentPage !== totalPages
          }"
          class="group px-4 py-3 border-2 border-gray-300/80 rounded-2xl bg-white/90 backdrop-blur-sm text-gray-700 transition-all duration-300 disabled:pointer-events-none shadow-md hover:shadow-xl">
          <i class="ri-arrow-right-s-line text-lg group-hover:scale-125 transition-transform duration-300"></i>
        </button>

        <!-- Last Page Button -->
        <button 
          (click)="goToPage(totalPages)"
          [disabled]="currentPage === totalPages"
          [ngClass]="{
            'opacity-25 cursor-not-allowed': currentPage === totalPages,
            'hover:bg-gradient-to-r hover:from-blue-50 hover:via-indigo-50 hover:to-purple-50 hover:border-blue-400 hover:text-blue-700 hover:shadow-lg hover:-translate-y-1 hover:scale-105': currentPage !== totalPages
          }"
          class="group px-3.5 py-3 border-2 border-gray-300/80 rounded-2xl bg-white/90 backdrop-blur-sm text-gray-700 transition-all duration-300 disabled:pointer-events-none shadow-md hover:shadow-xl">
          <i class="ri-arrow-right-double-line text-lg group-hover:scale-125 transition-transform duration-300"></i>
        </button>
      </div>

      <!-- Page Info -->
      <div class="hidden lg:flex items-center gap-3 px-5 py-3 bg-gradient-to-r from-blue-50/80 via-indigo-50/80 to-purple-50/80 backdrop-blur-sm rounded-2xl border-2 border-blue-300/40 shadow-xl">
        <div class="flex items-center justify-center w-9 h-9 rounded-xl bg-gradient-to-br from-blue-500 via-indigo-600 to-purple-600 text-white shadow-lg">
          <i class="ri-file-list-line text-sm"></i>
        </div>
        <div class="flex items-center gap-2">
          <span class="text-xs font-bold text-gray-600 uppercase tracking-wider">Page</span>
          <span class="text-xl font-black bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 bg-clip-text text-transparent">{{ currentPage }}</span>
          <span class="text-gray-400 font-extrabold text-lg">/</span>
          <span class="text-base font-bold text-gray-800">{{ totalPages }}</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Add Faculty Modal -->
  <div *ngIf="showAddForm" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4">
    <div class="bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto">
      <div class="sticky top-0 bg-white p-4 sm:p-6 border-b border-gray-200 flex justify-between items-center z-10">
        <h3 class="text-lg sm:text-xl font-bold text-gray-800">Add Faculty Member</h3>
        <button (click)="toggleAddForm()" class="text-gray-400 hover:text-gray-600 p-2 transition-colors">
          <i class="ri-close-line text-2xl"></i>
        </button>
      </div>

      <form #facultyForm="ngForm" (ngSubmit)="onSubmitFaculty(facultyForm)" class="p-4 sm:p-6 space-y-4 sm:space-y-6">
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Full Name *</label>
            <input type="text" name="name" ngModel required
              class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm" />
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Email *</label>
            <input type="email" name="email" ngModel required
              pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$"
              class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm" />
            <p class="text-xs text-gray-500 mt-1">e.g., name@cipc.edu</p>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Phone *</label>
            <input type="tel" name="phone" ngModel required
              pattern="[0-9\s\-\+\(\)]+"
              minlength="10"
              class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm" />
            <p class="text-xs text-gray-500 mt-1">e.g., +91 9876543210</p>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Employee ID *</label>
            <input type="text" name="employeeId" ngModel required
              pattern="[A-Z0-9]+"
              placeholder="EMP001"
              class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm uppercase" />
            <p class="text-xs text-gray-500 mt-1">e.g., EMP001</p>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Department *</label>
            <select name="department" ngModel required
              class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm">
              <option value="">Select Department</option>
              <option *ngFor="let dept of departments" [value]="dept">{{ dept }}</option>
            </select>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Designation *</label>
            <select name="designation" ngModel required
              class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm">
              <option value="">Select Designation</option>
              <option *ngFor="let desig of designations" [value]="desig">{{ desig }}</option>
            </select>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Qualification *</label>
            <input type="text" name="qualification" ngModel required
              class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm" />
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Experience (Years) *</label>
            <input type="number" name="experience" ngModel required min="0" max="50"
              class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm" />
            <p class="text-xs text-gray-500 mt-1">Enter years of experience (0-50)</p>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Join Date *</label>
            <input type="date" name="joinDate" ngModel required
              [max]="maxDate"
              class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm" />
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Salary (₹) *</label>
            <input type="number" name="salary" ngModel required min="0" step="1000"
              class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm" />
            <p class="text-xs text-gray-500 mt-1">Enter monthly salary in rupees</p>
          </div>
        </div>

        <div class="flex flex-col sm:flex-row justify-end gap-3 pt-4 sm:pt-6 border-t border-gray-200">
          <button type="button" (click)="toggleAddForm()"
            class="px-4 sm:px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors text-sm sm:text-base">
            Cancel
          </button>
          <button type="submit"
            class="px-4 sm:px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors text-sm sm:text-base">
            Add Faculty
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Edit Faculty Modal -->
  <div *ngIf="showEditForm && editingFaculty" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4">
    <div class="bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto">
      <div class="sticky top-0 bg-white p-4 sm:p-6 border-b border-gray-200 flex justify-between items-center z-10">
        <h3 class="text-lg sm:text-xl font-bold text-gray-800">Edit Faculty Member</h3>
        <button (click)="closeEditForm()" class="text-gray-400 hover:text-gray-600 p-2 transition-colors">
          <i class="ri-close-line text-2xl"></i>
        </button>
      </div>

      <form #editForm="ngForm" (ngSubmit)="onSubmitFaculty(editForm)" class="p-4 sm:p-6 space-y-4 sm:space-y-6">
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Full Name *</label>
            <input type="text" name="name" [ngModel]="editingFaculty.name" required
              class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm" />
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Email *</label>
            <input type="email" name="email" [ngModel]="editingFaculty.email" required
              pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$"
              class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm" />
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Phone *</label>
            <input type="tel" name="phone" [ngModel]="editingFaculty.phone" required
              pattern="[0-9\s\-\+\(\)]+"
              minlength="10"
              class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm" />
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Employee ID *</label>
            <input type="text" name="employeeId" [ngModel]="editingFaculty.employeeId" required
              pattern="[A-Z0-9]+"
              class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm uppercase" />
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Department *</label>
            <select name="department" [ngModel]="editingFaculty.department" required
              class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm">
              <option value="">Select Department</option>
              <option *ngFor="let dept of departments" [value]="dept">{{ dept }}</option>
            </select>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Designation *</label>
            <select name="designation" [ngModel]="editingFaculty.designation" required
              class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm">
              <option value="">Select Designation</option>
              <option *ngFor="let desig of designations" [value]="desig">{{ desig }}</option>
            </select>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Qualification *</label>
            <input type="text" name="qualification" [ngModel]="editingFaculty.qualification" required
              class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm" />
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Experience (Years) *</label>
            <input type="number" name="experience" [ngModel]="editingFaculty.experience" required min="0" max="50"
              class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm" />
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Join Date *</label>
            <input type="date" name="joinDate" [ngModel]="editingFaculty.joinDate" required
              [max]="maxDate"
              class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm" />
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Salary (₹) *</label>
            <input type="number" name="salary" [ngModel]="editingFaculty.salary" required min="0" step="1000"
              class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm" />
          </div>
        </div>

        <div class="flex flex-col sm:flex-row justify-end gap-3 pt-4 sm:pt-6 border-t border-gray-200">
          <button type="button" (click)="closeEditForm()"
            class="px-4 sm:px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors text-sm sm:text-base">
            Cancel
          </button>
          <button type="submit"
            class="px-4 sm:px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors text-sm sm:text-base">
            Update Faculty
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- View Faculty Modal -->
  <div *ngIf="showViewModal && viewingFaculty" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4">
    <div class="bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto">
      <div class="sticky top-0 bg-white p-4 sm:p-6 border-b border-gray-200 flex justify-between items-center z-10">
        <h3 class="text-lg sm:text-xl font-bold text-gray-800">Faculty Details</h3>
        <button (click)="closeViewModal()" class="text-gray-400 hover:text-gray-600 p-2 transition-colors">
          <i class="ri-close-line text-2xl"></i>
        </button>
      </div>

      <div class="p-4 sm:p-6 space-y-4 sm:space-y-6">
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6">
          <div>
            <label class="block text-xs sm:text-sm font-medium text-gray-500 mb-1">Full Name</label>
            <p class="text-sm sm:text-base font-semibold text-gray-900">{{ viewingFaculty.name }}</p>
          </div>
          <div>
            <label class="block text-xs sm:text-sm font-medium text-gray-500 mb-1">Employee ID</label>
            <p class="text-sm sm:text-base font-semibold text-gray-900">{{ viewingFaculty.employeeId }}</p>
          </div>
          <div>
            <label class="block text-xs sm:text-sm font-medium text-gray-500 mb-1">Email</label>
            <p class="text-sm sm:text-base text-gray-900 break-words">{{ viewingFaculty.email }}</p>
          </div>
          <div>
            <label class="block text-xs sm:text-sm font-medium text-gray-500 mb-1">Phone</label>
            <p class="text-sm sm:text-base text-gray-900">{{ viewingFaculty.phone }}</p>
          </div>
          <div>
            <label class="block text-xs sm:text-sm font-medium text-gray-500 mb-1">Department</label>
            <p class="text-sm sm:text-base text-gray-900">{{ viewingFaculty.department }}</p>
          </div>
          <div>
            <label class="block text-xs sm:text-sm font-medium text-gray-500 mb-1">Designation</label>
            <p class="text-sm sm:text-base text-gray-900">{{ viewingFaculty.designation }}</p>
          </div>
          <div>
            <label class="block text-xs sm:text-sm font-medium text-gray-500 mb-1">Qualification</label>
            <p class="text-sm sm:text-base text-gray-900">{{ viewingFaculty.qualification }}</p>
          </div>
          <div>
            <label class="block text-xs sm:text-sm font-medium text-gray-500 mb-1">Experience</label>
            <p class="text-sm sm:text-base text-gray-900">{{ viewingFaculty.experience }} years</p>
          </div>
          <div>
            <label class="block text-xs sm:text-sm font-medium text-gray-500 mb-1">Join Date</label>
            <p class="text-sm sm:text-base text-gray-900">{{ viewingFaculty.joinDate }}</p>
          </div>
          <div>
            <label class="block text-xs sm:text-sm font-medium text-gray-500 mb-1">Salary</label>
            <p class="text-sm sm:text-base text-gray-900">₹{{ viewingFaculty.salary?.toLocaleString('en-IN') || 'N/A' }}</p>
          </div>
          <div>
            <label class="block text-xs sm:text-sm font-medium text-gray-500 mb-1">Status</label>
            <span [ngClass]="{
              'bg-green-100 text-green-800': viewingFaculty.status === 'active',
              'bg-red-100 text-red-800': viewingFaculty.status === 'inactive'
            }"
            class="inline-flex px-2 py-1 text-xs font-semibold rounded-full">
              {{ viewingFaculty.status }}
            </span>
          </div>
        </div>

        <div class="flex flex-col sm:flex-row justify-end gap-3 pt-4 sm:pt-6 border-t border-gray-200">
          <button (click)="closeViewModal()"
            class="px-4 sm:px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors text-sm sm:text-base">
            Close
          </button>
          <button (click)="editFaculty(viewingFaculty); closeViewModal()"
            class="px-4 sm:px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors text-sm sm:text-base">
            Edit Details
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Delete Confirmation Modal -->
  <div *ngIf="deleteConfirmId" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4">
    <div class="bg-white rounded-2xl shadow-2xl w-full max-w-md">
      <div class="p-4 sm:p-6">
        <div class="flex items-center mb-4">
          <div class="flex-shrink-0 bg-red-100 rounded-full p-3">
            <i class="ri-error-warning-line text-red-600 text-2xl"></i>
          </div>
          <div class="ml-4">
            <h3 class="text-lg sm:text-xl font-bold text-gray-900">Delete Faculty Member</h3>
            <p class="text-sm text-gray-500 mt-1">This action cannot be undone.</p>
          </div>
        </div>
        <p class="text-sm sm:text-base text-gray-700 mb-6">
          Are you sure you want to delete this faculty member? All associated data will be permanently removed.
        </p>
        <div class="flex flex-col sm:flex-row justify-end gap-3">
          <button (click)="cancelDelete()"
            class="px-4 sm:px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors text-sm sm:text-base">
            Cancel
          </button>
          <button (click)="confirmDelete()"
            class="px-4 sm:px-6 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors text-sm sm:text-base">
            Delete
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
