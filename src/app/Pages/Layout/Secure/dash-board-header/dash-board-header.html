<!-- MAIN HEADER -->
<div class="bg-gradient-to-r from-green-50 to-blue-50 shadow px-4 py-2 flex items-center justify-between relative z-20">

  <!-- Logo + Institute -->
  <div class="flex items-center space-x-3">
    <img src="https://static.readdy.ai/image/85111bce17a3a7cabcbbff1d4ebbc787/d0d778464cf62505f63f8e8ff6cc0ba7.png"
         alt="CIPC Logo" class="w-10 h-10 rounded-full shadow-sm" />
    <div class="hidden sm:block">
      <h1 class="text-sm sm:text-base font-bold text-gray-800 leading-tight">CIPC PARAMEDICAL COUNCIL</h1>
      <p class="text-xs sm:text-sm text-gray-500">ISO 9001 : 2015 Certified</p>
    </div>
  </div>

  <!-- User Actions -->
  <div class="flex items-center space-x-3">

    <!-- Greeting -->
    <div class="hidden sm:flex flex-col text-right">
      <span class="font-semibold text-gray-800 text-sm sm:text-base">Hello, {{ user?.name || "Guest"}}</span>
      <span class="text-xs sm:text-sm text-gray-500">Super Admin {{ user?.role }}</span>
    </div>

    <!-- Notifications -->
    <div class="relative">
      <button (click)="toggleNotifications()"
              class="p-2 rounded-full hover:bg-gray-200 transition-colors relative">
        <i class="ri-notification-line text-lg text-gray-700"></i>
        <span *ngIf="unreadCount > 0"
              class="absolute -top-1 -right-1 w-4 h-4 bg-red-500 text-white text-[10px] rounded-full flex items-center justify-center font-bold animate-pulse">
          {{ unreadCount }}
        </span>
      </button>

      <!-- Notification List -->
      <div *ngIf="isNotificationOpen"
           class="absolute right-0 mt-1 w-64 max-h-80 bg-white border rounded-lg shadow-lg z-50 flex flex-col animate-fadeIn">
        <div class="p-2 border-b text-gray-700 font-semibold">Notifications</div>
        <ul class="overflow-y-auto flex-1">
          <li *ngFor="let note of notifications"
              class="px-3 py-2 hover:bg-gray-100 cursor-pointer flex items-start text-sm transition-colors duration-200">
            <i [ngClass]="note.icon + ' mr-2 mt-0.5 text-' + note.color + '-500'"></i>
            <div class="flex-1">
              <p class="truncate">{{ note.message }}</p>
              <span class="text-xs text-gray-400">{{ note.time }}</span>
            </div>
          </li>
        </ul>
        <div class="text-center text-xs text-gray-500 py-2 border-t cursor-pointer hover:bg-gray-100">
          View All Notifications
        </div>
      </div>
    </div>

    <!-- Profile Dropdown -->
    <div class="relative">
      <button (click)="toggleMenu()"
              class="flex items-center space-x-2 p-1.5 rounded-full hover:bg-gray-200 transition-colors">
        <img src="https://i.pravatar.cc/32" alt="User Image" class="w-6 h-6 rounded-full object-cover" />
        <!-- <span class="hidden md:block text-gray-800 font-medium text-sm sm:text-base">{{ user?.name || "Guest" }}</span> -->
        <i class="ri-arrow-down-s-line ml-0.5 text-gray-500 text-sm"></i>
      </button>

      <div *ngIf="isMenuOpen"
           class="absolute right-0 mt-1 w-36 bg-white border rounded-lg shadow-lg z-50 animate-fadeIn">
        <button (click)="logout()"
                class="w-full text-left px-3 py-1.5 text-gray-700 hover:bg-gray-100 rounded-t-lg text-sm sm:text-base flex items-center">
          <i class="ri-logout-box-line mr-2"></i> Logout
        </button>
        <button class="w-full text-left px-3 py-1.5 text-gray-700 hover:bg-gray-100 rounded-b-lg text-sm sm:text-base flex items-center">
          <i class="ri-settings-3-line mr-2"></i> Settings
        </button>
      </div>
    </div>

    <!-- Mobile Hamburger -->
    <button (click)="toggleMobileSidebar()" class="md:hidden p-2 rounded-full hover:bg-gray-200 transition-colors">
      <i class="ri-menu-line text-lg text-gray-700"></i>
    </button>
  </div>
</div>

<!-- OVERLAY FOR MOBILE SIDEBAR -->
<div *ngIf="isSidebarOpen"
     (click)="toggleMobileSidebar()"
     class="fixed inset-0 bg-black/30 z-10 md:hidden"></div>

<!-- SIDEBAR -->
<div [ngClass]="{'translate-x-0': isSidebarOpen, '-translate-x-full': !isSidebarOpen}"
     class="fixed top-0 left-0 w-64 h-screen bg-white shadow-lg border-r border-gray-200 flex flex-col overflow-hidden z-20 transform transition-transform duration-300">

  <!-- User Info -->
  <div class="p-4 border-b flex-shrink-0">
    <h2 class="text-lg font-bold text-gray-800">Management System</h2>
    <div class="mt-2">
      <div [ngClass]="'inline-flex items-center px-3 py-1 rounded-full text-xs sm:text-sm font-medium ' + getRoleColor()">
        <i class="ri-user-line mr-1"></i> {{ user?.role || 'No role' }}
      </div>
      <p class="text-sm sm:text-base text-gray-600 mt-1 truncate">{{ user?.name || 'Guest' }}</p>
    </div>
  </div>

  <!-- Menu Items -->
  <nav class="px-2 py-3 flex-1 overflow-y-auto">
    <ul class="space-y-1">
      <li *ngFor="let item of menuItems">
        <button (click)="setActiveModule(item.id)"
                [ngClass]="{'bg-green-100 text-green-700 border-l-4 border-green-600': activeModule === item.id,
                            'text-gray-600 hover:bg-gray-100 hover:text-gray-800': activeModule !== item.id}"
                class="w-full flex items-center px-3 py-2 rounded transition-all duration-200 text-left text-sm sm:text-base">
          <i [class]="item.icon + ' text-xl mr-3'"></i>
          <span class="font-medium">{{ item.label }}</span>
        </button>
      </li>
    </ul>
  </nav>

  <!-- Logout -->
  <div class="p-4 border-t mt-auto flex-shrink-0">
    <button (click)="logout()"
            class="w-full flex items-center px-3 py-2 text-gray-600 hover:bg-red-50 hover:text-red-600 rounded transition-colors duration-200 text-sm sm:text-base">
      <i class="ri-logout-box-line text-xl mr-2"></i>
      <span class="font-medium">Logout</span>
    </button>
  </div>
</div>
